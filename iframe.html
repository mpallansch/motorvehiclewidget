<!doctype html>
<html>
    <head>
        <title>MV PICCS</title>
        <link rel="stylesheet" href="css/main.css" />
    </head>
    <body data-ng-controller="mainCtrl">
        <div id="content">
            <div id="page-container" class="page{{pageNumber}}" data-ng-mouseout="showArrows = false" data-ng-mouseover="showArrows = true" swipe-page>
                <div id="page1" class="page">
                    <div class="page-header darkblue">
                        <h2>Motor Vehicle Intervention and Statistics by State</h2>
                    </div>
                    <div class="page-content">
                        <p><strong>What are you missing?</strong></p>
                        <p>Select a state to see which motor vehicle interventions are unimplemented in your state.</p>
                        <select data-ng-model="state" id="state-input">
                            <option data-ng-repeat="(st, data) in data" value="{{st}}">{{st}}</option>
                        </select>
                        <div class="content-section darkblue">
                            If the following motor vehicle injury prevention strategies where implemented in the state of <strong>{{state}}</strong>...
                        </div>
                        <div class="content-section lightblue">
                            <ol>
                                <li data-ng-repeat="strategy in data[state]['Unimplemented Interventions (Recommended by MV PICCS)']" data-ng-if="strategy">{{strategy}}</li>
                            </ol>
                        </div>
                        <p>Go to the next screen to see the cost benefit of implementing these strategies.</p>
                    </div>
                </div><div id="page2" class="page">
                    <div class="page-header darkblue">
                        <h2>{{state}}</h2>
                    </div>
                    <div class="page-content">
                        <div>Reduced Injuries: {{data[state]['Total # of Injuries Reduced'] | number:0}}<span class="percentage">{{data[state]['Percent Reduction in Injuries']}}</span></div>
                        <div>Reduced Deaths: {{data[state]['Total # of Fatalities Reduced'] | number: 0}}<span class="percentage">{{data[state]['Percent Reduction in Fatalities']}}</span></div>
                        <div>Monetary <strong>benefit</strong> of injuries prevented and lives saved<br/>Cost Benefit: ${{data[state]['Total Benefit'] | number:0}}<br/>Cost to implement: ${{data[state]['Total Cost (w/Fines Excluded)'] | number:0}}* <br/>*If costs are offset by fines - approx. ${{data[state]['Total Cost'] < 0 ? 0 : data[state]['Total Cost'] | number:0}}/year</div>
                        <p>Go to the next screen to see how your state compares in motor vehicle injury prevention strategies nationwide.</p>
                    </div>
                </div><div id="page3" class="page">
                    <div class="page-header darkblue">
                        <h2>Motor Vehicle Intervention and Statistics by State</h2>
                    </div>
                    <div class="page-content">
                        <p><strong>How does your state compare?</strong></p>
                        <p>{{state | uppercase}}</p>
                        <p>Choose an intervention to see individual implementation costs and benefits.</p>
                        <select data-ng-model="intervention" data-ng-change="drawMap()">
                            <option data-ng-repeat="strategy in strategies" data-ng-if="data[state][strategy + ': Intervention Implemented?'] === 'Yes'" value="{{strategy}}">{{strategy}}</option>
                        </select>
                        <div id="map"></div>
                        <div id="maplegend">
                            <span id="implemented-sample" class="sample"></span><span>Implemented</span>
                            <span id="not-implemented-sample" class="sample"></span><span>Not Implemented</span>
                        </div>
                    </div>
                </div><div id="page4" class="page">
                    <div class="page-header darkblue">
                        <h4>Implementation of {{intervention | lowercase}} in the state of {{state}}...</h4>
                    </div>
                    <div class="page-content">
                        <div>Reduced Injuries: {{data[state][intervention + ': # of Injuries Reduced'] | number:0}}</div>
                        <div>Reduced Deaths: {{data[state][intervention + ': # of Fatalities Reduced'] | number:0}}</div>
                        <div>Monetary <strong>benefit</strong> of injuries prevented and lives saved<br/>Cost Benefit: ${{data[state][intervention + ': Benefit $/year'] | number:0}}<br/>Cost to implement: ${{data[state][intervention + ' (Fines Excluded): Cost $/year'] | number:0}}* <br/>*If costs are offset by fines - approx. ${{data[state][intervention + ': Cost $/year'] < 0 ? 0 : data[state][intervention + ': Cost $/year'] | number:0}}/year</div>
                        <p>Visit <a target="_blank" href="https://wwwn.cdc.gov/mvip">https://wwwn.cdc.gov/mvip</a> to choose your own combination of motor vehicle strategies. Based on your own individualized budget, MV PICCS can also provide a list of recommended strategies to implement in your state.</p>
                    </div>
                </div>
                <p data-ng-click="changePage($event)" class="arrow left-arrow" data-ng-show="showArrows && pageNumber > 1">&lt;</p>
                <p data-ng-click="changePage($event)" class="arrow right-arrow" data-ng-show="showArrows && pageNumber < 4">&gt;</p>
            </div>
            <div id="footer" class="lightblue">
                <div id="footer-buttons">
                    <a href="#">Embed</a>
                    <a href="#">Disclaimer</a>
                    <a href="#">Info</a>
                </div>
                <a target="_blank" href="https://www.cdc.gov">
                    <img id="logo" src="/TemplatePackage/contrib/widgets/images/cdc_badge.png" alt="CDC Logo" />
                </a>
            </div>
        </div>
        
        <div id="loading-modal" data-ng-show="loading">
            <p><svg><circle cx="50" cy="50" r="45" fill="transparent" stroke="#000000" stroke-width="10px" /></svg></p>
        </div>
        <!--<script src="/TemplatePackage/contrib/libs/angular/1.4.3/angular.min.js"></script>-->
        <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.js"></script>
        
        <script src="/TemplatePackage/contrib/libs/angular/1.4.3/angular-route.min.js"></script>
        <script src="/TemplatePackage/contrib/libs/jquery/jquery-1.11.2.min.js"></script>
        <script src="/TemplatePackage/3.0/js/libs/jquery.mobile.custom.min.js"></script>
        <script src="/TemplatePackage/contrib/libs/bootstrap/3.3.4/js/bootstrap.min.js"></script>
        <script src="/TemplatePackage/3.0/js/libs/d3/d3.min.js"></script>
        <script src="/TemplatePackage/3.0/js/libs/d3/topojson.v1.min.js"></script>
        <script src="/TemplatePackage/3.0/js/libs/d3/datamaps.all.min.js"></script>
        <script src="/TemplatePackage/contrib/widgets/tp-widget-common.js"></script>
    </body>
</html>